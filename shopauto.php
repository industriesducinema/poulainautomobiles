
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <link rel="stylesheet" href="styles/shopauto.css">
  <title>Shopping Poulain Automobiles</title>
</head>
<body>
  
  <div class="container">
    <a href="index.php" class="close">
    <header>
      <div class="logo-with-img">
      <a href="index.php">
        <img src="image/image (1).png" alt="Poulain Automobiles"></a></div>
          </header>
<br><br>
 
  <section>
  <!-- partie haute panier  -->
  <div class="cart-modal-overlay">
    <div class="cart-modal">
      <i id="close-btn" class="fas fa-times"></i>
        <h1 class="cart-is-empty">Paiement est :</h1>
      
        <div class="product-rows">
        </div>
        <div class="total">
          <h1 class="cart-total">TOTAL</h1>
            <span class="total-price">€0</span>
              <button class="purchase-btn">ACHATS</button>
        </div>
      </div>
    </div>
<!--   fin du module de carte -->

  <div class="cart-btn">
    <i id="cart" class="fas fa-shopping-cart"></i>
      <span class ="cart-quantity">0</span>
  </div>
<!--  productions  -->
  
  <div class="items-container">
    <div class="card-1 card"  title="Carrera Classic" ><span class="product-price">Collector Jantes Carrera Classic
    <img class="product-image" src="https://content.eu.porsche.com/prod/pag/tequipment/TeqBildressourcenLive.nsf/C4466339DD7A22EBC12585230055071C/$file/TE20V00TD0104_low_20-_21-Zoll_Carrera_Classic_Sommerkomplettradsatz_huge.jpg" alt=""/>
      <button class="add-to-cart">Ajouter</button>   
      <span class="product-price">6.300,00 € </span></div>
    <div class="card-2 card"  title="Pirelli Pirelli_Slick-1" ><span class="product-price">Pneu Pirelli P Zéro 315
      <img class="product-image" src="https://srbmotorsport.fr/wp-content/uploads/2020/09/Pirelli_Slick-1.jpg" alt="Pirelli"/>
      <button class="add-to-cart">Ajouter</button>
      <span class="product-price">€875 </span>
    </div>
    <div class="card-3 card"  title="Casquette 71 McLaren" ><span class="product-price">Casquette F1 McLaren
      <img class="product-image" src="https://images.footballfanatics.com/mclaren-f1-team/mclaren-2023-new-era-9forty-team-cap_ss4_p-13368571+u-h51ruyd68pxx40u7p03l+v-18525d6b30ec4d509efd06464f3b03a1.jpg?_hv=2&w=900" alt="Casquette McLaren">
        <button class="add-to-cart">Ajouter</button>
        <span class="product-price">€36,95 €   </span>
    </div>
    <div class="card-4 card" title="Jantes Alu Gls Mercedes 21'"><span class="product-price">Jantes Amg Mercedes Gls
      <img class="product-image" src="https://www.mercedes-accessoires.fr/26291-home_default/pack-4-roues-completes-amg-hiver-gls-167-9-j-x-21-pouces-et-45-pneus-27550-r-21-113v.jpg" alt="Mercedes Amg Gls">
         <button class="add-to-cart">Ajouter</button>
         <span class="product-price">6 099,95 €   </span>
    </div>
    <div class="card-5 card" title="LIMITED EDITION HEADPHONES Rolls Royce"><span class="product-price">Casque Audio Rolls
      <img class="product-image" src="https://www.rolls-roycemotorcars.com/content/dam/rrmc/marketUK/rollsroycemotorcars_com/boutique/limited-edition-headphones/component-assets/accessories-product-high-end-headphones-hero.jpg/jcr:content/renditions/cq5dam.web.1920.webp" alt="">
      <button class="add-to-cart">Ajouter</button>
      <span class="product-price">€1230 </span>
    </div>
    <div class="card-6 card" title="Roues completes Rolls Royce20 STYLE 462 ALLOY WHEELS "><span class="product-price">Roues Rolls Royce
      <img class="product-image" src="https://www.rolls-roycemotorcars.com/content/dam/rrmc/marketUK/rollsroycemotorcars_com/boutique/20--style-462-alloy-wheels/page-properties/rolls-royce-accessories-product-wheels-462-single-card.jpg/jcr:content/renditions/cq5dam.web.828.jpeg" alt="20STYLE 462 ALLOY WHEELS">
        <button class="add-to-cart">Ajouter</button>
        <span class="product-price">€12130</span>
    </div>
    <div class="card-7 card"  title="Coffre de toit 250L noir a Audi " ><span class="product-price">Coffre de toit
      <img class="product-image" src="https://www.accessoires-audi.fr/1345-large_default/coffre-de-toit-noir-250l.jpg" alt="Coffre de toit 250L noir">
      <button class="add-to-cart">Ajouter</button>
      <span class="product-price">$1175 </span>
    </div>
    <div class="card-8 card"  title="Pull en jacquard Graffiti Multicolor " ><span class="product-price">Collection
      <img class="product-image" src="https://store.ferrari.com/product_image/1647597322311270/F/w480.jpg" alt="Pull en Jacquard Ferrari">
        <button class="add-to-cart">Ajouter</button>
          <span class="product-price">€ 890</span>
    </div>
    <div class="card-9 card"  title="Roues completes eté M5 " > <span class="product-price">Roues completes  
      <img class="product-image" src="https://www.accessoires-bmw.fr/53967-home_default/roues-completes-ete-20-m-performance-ferricgrey-style-795m-a-rayons-en-y-pour-bmw-serie-3-g20-g21.jpg" alt="Roues completes M5">
         <button class="add-to-cart">Ajouter</button>
         <span class="product-price">€ 5066,25   </span>
    </div>
    <div class="card-10 card"  title="Volant Porsche "> <span class="product-price">Volant
      <img class="product-image" src="https://porsche-catalogapi.smbb-logiciel.com/wp-content/uploads/2022/05/991044400018T3-0.png" alt="Volant Porsche">
      <button class="add-to-cart">Ajouter</button>
      <span class="product-price">1788,01 € </span>
    </div>
  </div>
  </section>
<!--  Fin  productions  -->
<div class="center-div" style="text-align: right;" >
  <a href="index17.php" class="back">
      <div>
      </div>
        <h4>Poulain Automobiles</h4>
          <span>Retour Acceuil</span>
              </a>
                  <span></span>      
</div>        
</div>  
<script>
// ouverture carte modal
const cart = document.querySelector('#cart');
const cartModalOverlay = document.querySelector('.cart-modal-overlay');

cart.addEventListener('click', () => {
  if (cartModalOverlay.style.transform === 'translateX(-200%)'){
    cartModalOverlay.style.transform = 'translateX(0)';
  } else {
    cartModalOverlay.style.transform = 'translateX(-200%)';
  }
})
// fin de l ouverture carte modal

// fermercarte modal
const closeBtn = document.querySelector ('#close-btn');

closeBtn.addEventListener('click', () => {
  cartModalOverlay.style.transform = 'translateX(-200%)';
});

cartModalOverlay.addEventListener('click', (e) => {
  if (e.target.classList.contains('cart-modal-overlay')){
    cartModalOverlay.style.transform = 'translateX(-200%)'
  }
})
// fin modul modal

// ajouter un produit carte
const addToCart = document.getElementsByClassName('add-to-cart');
const productRow = document.getElementsByClassName('product-row');

for (var i = 0; i < addToCart.length; i++) {
  button = addToCart[i];
  button.addEventListener('click', addToCartClicked)
}

function addToCartClicked (event) {
  button = event.target;
  var cartItem = button.parentElement;
  var price = cartItem.getElementsByClassName('product-price')[0].innerText;
  
  var imageSrc = cartItem.getElementsByClassName('product-image')[0].src;
  addItemToCart (price, imageSrc);
  updateCartPrice()
}

function addItemToCart (price, imageSrc) {
  var productRow = document.createElement('div');
  productRow.classList.add('product-row');
  var productRows = document.getElementsByClassName('product-rows')[0];
  var cartImage = document.getElementsByClassName('cart-image');
  
  for (var i = 0; i < cartImage.length; i++){
    if (cartImage[i].src == imageSrc){
      alert ('This item has already been added to the cart')
      return;
    }
  }
  
  var cartRowItems = `
  <div class="product-row">
        <img class="cart-image" src="${imageSrc}" alt="">
        <span class ="cart-price">${price}</span>
        <input class="product-quantity" type="number" value="1">
        <button class="remove-btn">Remove</button>
        </div>
        
      `
  productRow.innerHTML = cartRowItems;
  productRows.append(productRow);
  productRow.getElementsByClassName('remove-btn')[0].addEventListener('click', removeItem)
  productRow.getElementsByClassName('product-quantity')[0].addEventListener('change', changeQuantity)
  updateCartPrice()
}
// fin

// effacer effacer carte
const removeBtn = document.getElementsByClassName('remove-btn');
for (var i = 0; i < removeBtn.length; i++) {
  button = removeBtn[i]
  button.addEventListener('click', removeItem)
}

function removeItem (event) {
  btnClicked = event.target
  btnClicked.parentElement.parentElement.remove()
  updateCartPrice()
}

// augmenter quantité input
var quantityInput = document.getElementsByClassName('product-quantity')[0];

for (var i = 0; i < quantityInput; i++){
  input = quantityInput[i]
  input.addEventListener('change', changeQuantity)
}

function changeQuantity(event) {
  var input = event.target
  if (isNaN(input.value) || input.value <= 0){
    input.value = 1
  }
  updateCartPrice()
}
// fin of update quantitté input

//  total prix
function updateCartPrice() {
  var total = 0
  for (var i = 0; i < productRow.length; i += 2) {
    cartRow = productRow[i]
  var priceElement = cartRow.getElementsByClassName('cart-price')[0]
  var quantityElement = cartRow.getElementsByClassName('product-quantity')[0]
  var price = parseFloat(priceElement.innerText.replace('$', ''))
  var quantity = quantityElement.value
  total = total + (price * quantity )
    
  }
  document.getElementsByClassName('total-price')[0].innerText =  '€' + total

document.getElementsByClassName('cart-quantity')[0].textContent = i /= 2
}
// fin de update total prix

// achat items
const purchaseBtn = document.querySelector('.purchase-btn');

const closeCartModal = document.querySelector('.cart-modal');

purchaseBtn.addEventListener('click', purchaseBtnClicked)

function purchaseBtnClicked () {
  alert ('Poulain Automobiles vous remercie de votre confiance');
  cartModalOverlay.style.transform= 'translateX(-100%)'
 var cartItems = document.getElementsByClassName('product-rows')[0]
 while (cartItems.hasChildNodes()) {
   cartItems.removeChild(cartItems.firstChild)
   
 }
  updateCartPrice()
}
// fin achats items

//alerte user si carte est vide 

</script>
<footer>
                    <p>Copyright &copy; 2023 Olivier Poulain Designer Web Developpeur Droits réservés  o.poulain@outlook.com</p>
                        </footer>
</body>
</html>